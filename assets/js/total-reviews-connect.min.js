function total_reviews_fbpopup(e,t,a,o){function s(){n&&0==n.closed?setTimeout(s,100):o()}var c=c||screen.height/2-a/2,i=i||screen.width/2-t/2,n=window.open(e,"","location=1,status=1,resizable=yes,width="+t+",height="+a+",top="+c+",left="+i);setTimeout(s,100)}function total_reviews_fbconnect(e,t){return total_reviews_fbpopup("https://app.widgetpack.com/auth/fbrev?scope=manage_pages,pages_show_list",670,520,function(){WPacXDM.get("https://embed.widgetpack.com","https://app.widgetpack.com/widget/facebook/accesstoken",{},function(a){WPacFastjs.jsonp("https://graph.facebook.com/me/accounts",{access_token:a.accessToken,limit:250},function(a){var o=e.querySelector(".total-reviews-fbpages"),s=e.querySelector(".total-reviews-fbpage-id"),c=e.querySelector(".total-reviews-fbpage-name"),i=e.querySelector(".total-reviews-fbpage-token"),n=e.querySelector(".total-reviews-fbbusiness-photo"),r=e.querySelector(".total-reviews-fbbusiness-photo-img");WPacFastjs.each(a.data,function(e){var a=WPacFastjs.create("div","total-reviews-fbpage");a.innerHTML='<img src="https://graph.facebook.com/'+e.id+'/picture" class="total-reviews-fbpage-photo"><div class="total-reviews-fbpage-name">'+e.name+"</div>",o.appendChild(a),WPacFastjs.on(a,"click",function(){return s.value=e.id,c.value=e.name,i.value=e.access_token,n&&(n.value="",r.src="https://graph.facebook.com/"+e.id+"/picture",WPacFastjs.show2(r)),WPacFastjs.remcl(o.querySelector(".active"),"active"),WPacFastjs.addcl(a,"active"),t&&t(),!1})})})})}),!1}function total_reviews_fbinit(e){var t=document.querySelector("#"+e.widgetId);if(t){var a=t.querySelector(".total-reviews-fbconnect");WPacFastjs.on(a,"click",function(){return total_reviews_fbconnect(t,e.cb),!1}),jQuery(document).ready(function(a){var o;a(".total-reviews-fbbusiness-photo-btn",t).on("click",function(s){s.preventDefault();{if(!o)return(o=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var s=a(".total-reviews-fbbusiness-photo",t),c=a(".total-reviews-fbbusiness-photo-img",t);attachment=o.state().get("selection").first().toJSON(),s.val(attachment.url),c.attr("src",attachment.url),c.show(),e.cb&&e.cb()}),o.open(),!1;o.open()}}),a(".rplg-options-toggle",t).unbind("click").click(function(){a(this).toggleClass("toggled"),a(this).next().slideToggle()})})}}